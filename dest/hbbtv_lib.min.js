if(window.HbbTV||(HbbTV=function(){return{}}()),"undefined"!=typeof KeyEvent){if("undefined"!=typeof KeyEvent.VK_LEFT)var VK_LEFT=KeyEvent.VK_LEFT,VK_UP=KeyEvent.VK_UP,VK_RIGHT=KeyEvent.VK_RIGHT,VK_DOWN=KeyEvent.VK_DOWN;if("undefined"!=typeof KeyEvent.VK_ENTER)var VK_ENTER=KeyEvent.VK_ENTER;if("undefined"!=typeof KeyEvent.VK_RED)var VK_RED=KeyEvent.VK_RED,VK_GREEN=KeyEvent.VK_GREEN,VK_YELLOW=KeyEvent.VK_YELLOW,VK_BLUE=KeyEvent.VK_BLUE;if("undefined"!=typeof KeyEvent.VK_PLAY)var VK_PLAY=KeyEvent.VK_PLAY,VK_PAUSE=KeyEvent.VK_PAUSE,VK_STOP=KeyEvent.VK_STOP;if("undefined"!=typeof KeyEvent.VK_FAST_FWD)var VK_FAST_FWD=KeyEvent.VK_FAST_FWD,VK_REWIND=KeyEvent.VK_REWIND;if("undefined"!=typeof KeyEvent.VK_BACK)var VK_BACK=KeyEvent.VK_BACK;if("undefined"!=typeof KeyEvent.VK_0)var VK_0=KeyEvent.VK_0,VK_1=KeyEvent.VK_1,VK_2=KeyEvent.VK_2,VK_3=KeyEvent.VK_3,VK_4=KeyEvent.VK_4,VK_5=KeyEvent.VK_5,VK_6=KeyEvent.VK_6,VK_7=KeyEvent.VK_7,VK_8=KeyEvent.VK_8,VK_9=KeyEvent.VK_9}if("undefined"==typeof VK_LEFT)var VK_LEFT=37,VK_UP=38,VK_RIGHT=39,VK_DOWN=40;if("undefined"==typeof VK_ENTER)var VK_ENTER=13;if("undefined"==typeof VK_RED)var VK_RED=116,VK_GREEN=117,VK_YELLOW=118,VK_BLUE=119;if("undefined"==typeof VK_PLAY)var VK_PLAY=80,VK_PAUSE=81,VK_STOP=83;if("undefined"==typeof VK_FAST_FWD)var VK_FAST_FWD=70,VK_REWIND=82;if("undefined"==typeof VK_BACK)var VK_BACK=166;if("undefined"==typeof VK_0)var VK_0=48,VK_1=49,VK_2=50,VK_3=51,VK_4=52,VK_5=53,VK_6=54,VK_7=55,VK_8=56,VK_9=57;if(window.HbbTV.Main||(HbbTV.Main=function(){var a={},b=this;return a.init=function(b){try{console.log("HbbTV::Getting appManager"),a.appManager=document.getElementById("applicationManager"),a.hbbtvApp=a.appManager.getOwnerApplication(document),a.hbbtvApp.show(),a.hbbtvApp.activate()}catch(c){}a.setKeys(!0),a.userAgent=navigator&&navigator.appName?navigator.appName+", "+navigator.appVersion+", "+navigator.userAgent:"",a.userAgentLog=navigator&&navigator.appName?navigator.appName+", "+navigator.appVersion:"",console.log("HbbTV::UA:"+a.userAgentLog),b&&(HbbTV.KeyHandler.keyCallBack=b),document.addEventListener("keydown",HbbTV.KeyHandler.handleKeyCodes,!1)},a.setKeys=function(b){console.log("HbbTV::Setting KeySet"),a.oipfcfg=document.getElementById("oipfcfg");var c=b?831:31;try{a.hbbtvApp.privateData.keyset.setValue(c),a.hbbtvApp.privateData.keyset.value=c}catch(d){try{a.oipfcfg.keyset.value=c}catch(d){try{a.oipfcfg.keyset.setValue(c)}catch(d){}}}},a.initVideo=function(){var b=document.getElementById("video");try{b.setFullScreen(!0)}catch(c){}try{b.bindToCurrentChannel()}catch(c){}try{b.onChannelChangeSucceeded=a.channelChanged(b)}catch(c){}},a.channelChanged=function(){console.log("HbbTV::Channel changed"),a.destroy()},a.destroy=function(){try{return void a.hbbtvApp.destroyApplication()}catch(b){console.log("HbbTV::Destroy failed"),location.reload()}},a.setCookie=function(a,b,c){if(c||(c=1),a&&b)try{var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toGMTString();return document.cookie=a+"="+b+"; "+e,!0}catch(f){return!1}},a.getCookie=function(a){if(a)try{a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""}catch(e){return!1}},a.isActive=!1,a.switchRedButton=function(b,c){b=document.getElementById(b),c=document.getElementById(c),a.isActive?(b.style.display="none",c.style.display="block",this.timer=setTimeout(function(){c.style.display="none"},5e3),a.isActive=!1,a.setKeys(!1)):(clearTimeout(this.timer),a.isActive=!0,b.style.display="block",c.style.display="none",a.setKeys(!0))},a.benchmark=function(){var c=a.getCookie("ard_test_perf");if(""!==a.getCookie("ard_test_perf")&&"-1"!==a.getCookie("ard_test_perf"))HbbTV.Config.animated=HbbTV.Config.performanceLimit>=parseInt(c,10);else{var d=document.getElementById("app_container");window.timediff=(new Date).getTime(),b.iterSpeed(0,d)}},a.animated=!0,a.getAnimated=function(){return HbbTV.Config.animated_overwrite?a.animated:!1},this.iterSpeed=function(a,b){var c=this;a++,setTimeout(function(){if(a>10){var d=(new Date).getTime()-window.timediff;return HbbTV.Main.setCookie("ard_test_perf",d,1),void(HbbTV.Config.animated=HbbTV.Config.performanceLimit>=d)}b.style.width=a+"px",b.style.heigt=a+"px",b.style.width="0px",b.style.heigt="0px",b.style.width=a+"px",b.style.heigt=a+"px",b.style.width="0px",b.style.heigt="0px",c.iterSpeed(a,b)},40)},a.loadApp=function(c,d,e,f){console.log("HbbTV::Changing app to: "+c+" with params: "+d+"alternative URL: "+e);try{if(b.appDelay)return;var g=a.userAgent.toUpperCase();if(g.indexOf("SONY")>0)return void(b.appDelay=setTimeout(function(){b.loadApp(c,d,e,f)},1e3))}catch(h){}b.loadApp(c,d,e,f)},a.loadingEvents=["DVB_OK","DVB_FAILED","URL_OK","URL_FAILED"],this.loadApp=function(b,c,d,e){e=e||function(){};var f="dvb://current.ait/"+b+(c?"?"+c:"");try{if(a.hbbtvApp.createApplication(f,!1))return e(a.loadingEvents[0]),void a.hbbtvApp.destroyApplication()}catch(g){}e(a.loadingEvents[1]),c&&(d+=(d.indexOf("?")>0?"&":"?")+c);var h,i='{"url":"'+d+'"}';try{h=new XMLHttpRequest}catch(g){try{h=new ActiveXObject("Msxml2.XMLHTTP")}catch(g){try{h=new ActiveXObject("Microsoft.XMLHTTP")}catch(g){}}}h.open("POST",HbbTV.Config.pingURL),h.onreadystatechange=function(){4==h.readyState&&(200==h.status?"true"==h.responseText?(e(a.loadingEvents[3]),document.location.href=d):e(a.loadingEvents[4]):document.location.href=d)},h.send(i)},a}()),!window.HbbTV)var hbbtvApp,oipfcfg;window.HbbTV.KeyHandler||(HbbTV.KeyHandler=function(){var a={};return a.handleKeyCodes=function(b){switch(b.preventDefault(),b.keyCode){case b.VK_RED:case VK_RED:case 116:case 403:a.keyCallBack(VK_RED);break;case b.VK_GREEN:case VK_GREEN:case 117:case 404:a.keyCallBackWrapper(VK_GREEN);break;case b.VK_YELLOW:case VK_YELLOW:case 118:case 405:a.keyCallBackWrapper(VK_YELLOW);break;case b.VK_BLUE:case VK_BLUE:case 119:case 406:a.keyCallBackWrapper(VK_BLUE);break;case b.VK_ENTER:case VK_ENTER:case 13:a.keyCallBackWrapper(VK_ENTER);break;case b.VK_LEFT:case VK_LEFT:case 37:case 65:a.keyCallBackWrapper(VK_LEFT);break;case b.VK_UP:case VK_UP:case 38:case 87:a.keyCallBackWrapper(VK_UP);break;case b.VK_RIGHT:case VK_RIGHT:case 39:case 68:a.keyCallBackWrapper(VK_RIGHT);break;case b.VK_DOWN:case VK_DOWN:case 40:case 83:a.keyCallBackWrapper(VK_DOWN);break;case b.VK_0:case VK_0:case 48:a.keyCallBackWrapper(VK_0);break;case b.VK_1:case VK_1:case 49:a.keyCallBackWrapper(VK_1);break;case b.VK_2:case VK_2:case 50:a.keyCallBackWrapper(VK_2);break;case b.VK_3:case VK_3:case 51:a.keyCallBackWrapper(VK_3);break;case b.VK_4:case VK_4:case 52:a.keyCallBackWrapper(VK_4);break;case b.VK_5:case VK_5:case 53:a.keyCallBackWrapper(VK_5);break;case b.VK_6:case VK_6:case 54:a.keyCallBackWrapper(VK_6);break;case b.VK_7:case VK_7:case 55:a.keyCallBackWrapper(VK_7);break;case b.VK_8:case VK_8:case 56:a.keyCallBackWrapper(VK_8);break;case b.VK_9:case VK_9:case 57:a.keyCallBackWrapper(VK_9)}},a.keyCallBack=function(a){console.log("HbbTV::Dummy keyCallBack:"+a)},a.keyCallBackWrapper=function(b){HbbTV.Main.isActive&&a.keyCallBack(b)},a}()),function(){var a,b={error:function(a){k(a,"ERROR")},debug:function(a){k(a,"DEBUG")},log:function(a){k(a,"DEBUG")},info:function(a){k(a,"INFO")},warn:function(a){k(a,"WARN")},trace:function(a){k(a,"TRACE")}};if(0==HbbTV.Config.loggingMode);else if(1==HbbTV.Config.loggingMode)window.console=b;else if(2==HbbTV.Config.loggingMode&&window.console&&"function"==typeof window.console.log.apply){var c=h.error;h.error=function(a){c.apply(this,arguments),b.error(a)};var d=h.debug;h.debug=function(a){d.apply(this,arguments),b.debug(a)};var e=h.log;h.log=function(a){e.apply(this,arguments),b.log(a)};var f=h.info;h.info=function(a){b.info(a),f.apply(this,arguments)};var g=h.warn;window.console.warn=function(a){b.warn(a),g.apply(this,arguments)}}for(var h=window.console=window.console||b,i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],j=i.length;j--;)a=i[j],h[a]||(h[a]=b.debug);var k=function(a,b){function c(){4==d.readyState&&404==d.status&&alert("ERROR::Logger not found!")}var d,e='{"msg":"'+a+'","level":"'+b+'","ident":"'+HbbTV.Config.id+'"}';try{d=new XMLHttpRequest}catch(f){try{d=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){try{d=new ActiveXObject("Microsoft.XMLHTTP")}catch(f){return alert("Your browser broke!"),!1}}}d.open("POST",HbbTV.Config.logURL,!0),d.onreadystatechange=c,d.setRequestHeader("Content-Type","application/json; charset=utf-8"),d.send(e)}}();